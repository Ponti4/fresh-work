흐름 속에서 필요한 2가지 작업

  1. "사용자 선택이 필요한" 부분
  /setup-workspace
    ├─ Persona 선택 (Kim/Lee/Park/Choi 중 택1)
    ├─ Usecase 선택 (3-4개 중 택1)
    └─ 선택 결과를 CLAUDE.md 저장
  → 사용자와 대화해야 함

  2. "자동으로 반복되는" 부분
  /clarify 실행 후
    ├─ 명확화 파일 생성됨 (자동)
    └─ CLAUDE.md 업데이트 필요 (자동화 가능)

  /design 실행 후
    ├─ 설계 파일 생성됨 (자동)
    └─ CLAUDE.md 업데이트 필요 (자동화 가능)

  /implement 실행 후
    ├─ 코드 파일 생성됨 (자동)
    └─ Progress 업데이트 필요 (자동화 가능)
  → 배경에서 자동으로 실행 가능

  ---
  🎯 Skills vs Hooks 비교표

  | 측면             | Skills               | Hooks                 |        
  |------------------|----------------------|-----------------------|        
  | 사용자 상호작용  | ✅ 가능 (UI, 질문)   | ❌ 불가능             |        
  | 자동 실행        | ⚠️ 사용자 명령 필요  | ✅ 자동 실행          |        
  | 복잡한 로직      | ✅ 가능              | ⚠️ 간단한 스크립트만  |        
  | 다양한 도구 사용 | ✅ 모든 도구 가능    | ⚠️ 제한적             |        
  | 사용자 경험      | 명시적 (사용자 인식) | 투명한 (자동, 인식 X) |        
  | 유지보수         | 중앙화됨             | 분산됨                |        
  | 재사용성         | 높음 (명시적 호출)   | 낮음 (특정 트리거)    |        
  | 성능             | 동기 (블로킹)        | 비동기 가능           |        

  ---
  📊 "현재 복잡도"에서의 필요성

  초기 Setup (High Complexity - 사용자 선택)

  "당신의 타입은?"
  ├─ Kim (마케터) → 추천: 미팅정리, 이메일분류, 영수증
  ├─ Lee (데이터) → 추천: SNS수집, 감정분석, 리포트
  ├─ Park (취준생) → 추천: 음성변환, 크롤링, 배포
  └─ Choi (개발자) → 추천: API, AI처리, ETL

  선택 결과:
    - CLAUDE.md에 Persona 저장
    - 추천 Usecase 목록 제시
    - 사용자가 1개 선택
    - CLAUDE.md에 첫 Challenge 저장

  → **Skill 필수** (사용자와 대화 필요)

  반복되는 자동화 (Low-Medium Complexity)

  /clarify 완료
    → 명확화 파일 생성됨 (__test__/20250101_xxx/clarified-task.md)
    → Hook이 감지: "어라, 새 파일이 생겼네?"
    → CLAUDE.md 업데이트: "Step 1 완료 ✅"
    → Progress 계산: "0% → 30%"

  /design 완료
    → 설계 파일 생성됨 (__test__/20250101_xxx/design.md)
    → Hook이 감지 + CLAUDE.md 업데이트
    → Progress: "30% → 60%"

  → **Hook 가능** (파일 감지 + 자동 업데이트)

  ---
  🎨 최적 아키텍처 제안

  하이브리드 접근: Skill + Hook 조합

  ┌─────────────────────────────────────┐
  │  Setup Phase (사용자 중심)           │
  ├─────────────────────────────────────┤
  │                                     │
  │  /setup-workspace                   │
  │    ├─ 기본 정보 (이름, 목표)        │
  │    │                                 │
  │    ├─ 📌 NEW Skill: /select-persona │
  │    │   ├─ Persona 선택 UI           │
  │    │   ├─ Usecase 추천 제시         │
  │    │   ├─ Usecase 선택 UI           │
  │    │   └─ CLAUDE.md 저장            │
  │    │                                 │
  │    ├─ 환경 정보 (OS, Python)        │
  │    └─ 완료!                          │
  │                                     │
  └─────────────────────────────────────┘
                ↓
  ┌─────────────────────────────────────┐
  │  Execution Phase (자동화)            │
  ├─────────────────────────────────────┤
  │                                     │
  │  /clarify → 명확화 파일 생성        │
  │    ↓                                │
  │  📌 Hook: PostToolUse (자동)        │
  │    ├─ 파일 감지                     │
  │    ├─ CLAUDE.md 업데이트            │
  │    ├─ Progress 계산 (30%)           │
  │    └─ 축하 메시지                   │
  │                                     │
  │  /design → 설계 파일 생성           │
  │    ↓                                │
  │  📌 Hook: PostToolUse (자동)        │
  │    ├─ 파일 감지                     │
  │    ├─ CLAUDE.md 업데이트            │
  │    ├─ Progress 계산 (60%)           │
  │    └─ "다음은 테스트!"             │
  │                                     │
  │  /test-run → 테스트 완료            │
  │    ↓                                │
  │  📌 Hook: PostToolUse (자동)        │
  │    ├─ 결과 파일 감지                │
  │    ├─ CLAUDE.md 업데이트            │
  │    ├─ Progress 계산 (85%)           │
  │    └─ "배포 준비됨!"               │
  │                                     │
  └─────────────────────────────────────┘

  ---
  📋 구체적 구현 계획

  1단계: Skill /select-persona 생성

  역할: Setup 단계에서 Persona 선택 + Usecase 선택 + CLAUDE.md 저장

  입출력:
  입력: 없음 (사용자 선택으로 진행)
  출력:
    - Persona 정보 (CLAUDE.md에 저장)
    - 추천 Usecase 리스트
    - 첫 번째 Usecase (CLAUDE.md에 저장)
    - 다음 명령어 가이드 (/clarify)

  위치: .claude/skills/select-persona/SKILL.md

  구조:
  description: Persona 선택 및 Usecase 추천
  argument-hint: <없음 - 사용자 상호작용으로 진행>
  related: _systems/persona, _systems/usecase

  ---
  2단계: Hook PostToolUse 자동화

  역할: 각 명령어 완료 후 자동으로 CLAUDE.md 업데이트 및 Progress 계산       

  트리거: /clarify, /design, /implement, /test-run 완료

  작업:
  1. 새로 생성된 파일 감지 (__test__/{date}_{title}/*.md)
  2. 파일 내용 파싱 (어떤 단계가 완료됐나?)
  3. Progress 계산
     - Clarify 완료: 25% → 30%
     - Design 완료: 30% → 60%
     - Implement 완료: 60% → 85%
     - Test 통과: 85% → 100%
  4. CLAUDE.md 업데이트
     - Progress 섹션 수정
     - 완료된 Step 체크
     - 다음 Step 제시
  5. 축하 메시지 출력

  위치: .claude/hooks/post-tool-use.sh 또는 설정

  ---
  3단계: 선택사항 - Weekly Review Hook

  역할: 매주 자동으로 주간 정리 생성

  트리거: 설정된 요일(예: 금요일)

  작업: /weekly-review 명령어 자동 실행

  ---
  🎯 왜 이 방식인가?

  ✅ 사용자 경험

  | 단계      | 경험                                  | 구현 방식 |
  |-----------|---------------------------------------|-----------|
  | Setup     | "당신 같은 사람들은..." (명확한 선택) | Skill     |
  | Clarify   | 명령어 입력 후 자동 업데이트          | Hook      |
  | Design    | 명령어 입력 후 자동 업데이트          | Hook      |
  | Implement | 명령어 입력 후 Progress 자동 추적     | Hook      |

  → 처음은 명시적, 이후는 투명한 자동화

  ✅ 유지보수 용이

  Skill 추가/수정:
  - .claude/skills/select-persona/ 폴더만 건드림
  - 기존 Setup 로직 영향 X

  Hook 추가/수정:
  - .claude/hooks/ 설정만 수정
  - 각 명령어 영향 X

  ✅ 현재 복잡도에 맞음

  - 사용자 선택 필요: Skill ✅
  - 반복 자동화: Hook ✅
  - 과하지도, 부족하지도 않음 ✅

  ✅ 확장 가능

  새로운 Persona 추가?
  - Persona 문서 추가
  - Usecase 문서 추가
  - Hook 규칙 1-2줄 추가
  - 기존 코드 거의 안 건드림

  새로운 명령어 추가?
  - 명령어 구현
  - Hook에 파일 감지 규칙 추가
  - 기존 Hook 로직 거의 안 건드림

  ---
  ⚠️ 고려사항

  Hook의 제한사항

  - 권한: 파일 시스템에 접근할 수 있어야 함 (주로 가능)
  - 복잡도: Hook 자체는 간단한 스크립트 (복잡한 로직은 Skill에서)
  - 디버깅: 백그라운드 실행이라 문제 추적 어려울 수 있음

  해결책

  - Hook은 간단한 파일 감지 + CLAUDE.md 업데이트만
  - 복잡한 로직(Progress 계산, 텍스트 생성)은 Skill에서 미리 처리
  - Hook은 결과만 저장하는 역할로 제한

  ---
  🚀 최종 추천

  현재 단계에서의 최적 접근

  Step 1: Skill /select-persona 구현 (1-2시간)
    → Setup 완성
    → 사용자가 Persona 명확히 선택
    → CLAUDE.md에 저장

  Step 2: Hook 기본 틀 (1-2시간)
    → PostToolUse Hook 설정
    → 파일 감지 + CLAUDE.md 업데이트
    → Progress 자동 계산

  Step 3: 각 명령어 구현 (/design, /implement 등)
    → Hook이 자동으로 후처리

  Step 4: 선택사항 - Weekly Review Hook
    → 나중에 추가 가능

  왜 이 순서인가?

  1. /select-persona Skill 먼저
    - Setup 완성 = 사용자가 "내 경로"를 명확히 알게 됨
    - 심리적 고관여 시작
  2. Hook 기본 틀
    - 이후 모든 명령어가 자동으로 혜택 봄
    - 처음부터 구현하면 재사용 가능
  3. 명령어들
    - Hook이 이미 준비되어 있으니, 명령어만 구현하면 자동 연동
    - 병렬 진행 가능

  ---
  📝 최종 결론

  현재 복잡도에서는 Skill + Hook 하이브리드가 최적입니다.

  사용자 입장:
    1️⃣ Setup: "당신의 타입 선택" (Skill의 명확한 UI)
    2️⃣ 이후: 자동 업데이트 (Hook의 투명성)

  개발자 입장:
    1️⃣ Skill: 사용자 상호작용만 집중
    2️⃣ Hook: 자동화 로직만 집중
    3️⃣ 각각 독립적, 수정 용이

  확장성:
    - 새 Persona? 문서 추가만
    - 새 명령어? Hook 규칙 추가만