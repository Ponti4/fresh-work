# Persona Inference Logic - 사용자 답변 → Persona 자동 판정

> Setup-workspace Step 3 "당신의 상황"에서 사용자가 제시한 답변을 바탕으로 **자동으로 Persona를 추론**하는 로직

---

## 🎯 목표

```
사용자 입력 (자유형식)
    ↓
   분석 (키워드 추출)
    ↓
   점수 계산 (각 Persona별)
    ↓
   최고점 Persona 제시
    ↓
   사용자 확인 (맞나요?)
```

---

## 🔍 분석 항목 (4가지)

### 1. 직업 & 배경 분석

**Kim 신호:**
- "마케팅", "기획", "콘텐츠" 프리랜서
- "일이 많아", "시간이 없어"
- "프리랜서", "자영업"

**Lee 신호:**
- "마케팅", "성장해킹", "데이터"
- "분석", "인사이트", "의사결정"
- "SNS", "고객", "분석"

**Park 신호:**
- "학생", "취준생", "대학교"
- "취업", "포트폴리오", "경력"
- "경험", "스킬 부족"

**Choi 신호:**
- "개발자", "엔지니어", "CTO"
- "풀스택", "아키텍처", "스케일"
- "독립", "부수입", "창업"

### 2. 반복 업무 분석

**Kim 신호:**
- "미팅", "이메일", "영수증", "정리"
- "매일", "일일", "반복"
- "간단한", "하지만 시간이 오래"

**Lee 신호:**
- "수집", "분석", "데이터", "리포트"
- "SNS", "고객", "트렌드", "성과"
- "대용량", "정확성", "확장"

**Park 신호:**
- "프로젝트", "포트폴리오", "학습"
- "개발", "코딩", "웹", "앱"
- "배포", "온라인", "공개"

**Choi 신호:**
- "API", "통합", "파이프라인", "ETL"
- "복잡한", "규모가 큰", "최적화"
- "아키텍처", "성능"

### 3. 불편함 분석

**Kim 신호:**
- "시간이 오래", "반복이 싫어", "지겨워"
- "수동작업", "효율"
- 양적 문제 (시간, 횟수)

**Lee 신호:**
- "정확도", "일관성", "확장", "스케일"
- "데이터 품질", "검증"
- 질적 문제 (품질, 정확도)

**Park 신호:**
- "경력 부족", "포트폴리오 약해", "취업 어려워"
- "경험", "신뢰도", "공신력"
- 심리적 문제 (자신감, 경력)

**Choi 신호:**
- "유지보수", "비용 최적화", "성능", "스케일"
- "비즈니스", "수익화", "고객"
- 비즈니스 문제 (수익, 확장성)

### 4. 기술 & 목표 분석

**Kim 신호:**
- "코딩 못 해", "처음이라", "초보"
- "일단 해보고 싶어", "배우면서 하기"
- "3개 자동화"

**Lee 신호:**
- "Python 기초", "SQL 알아", "분석 경험"
- "자동화 도구", "데이터 파이프라인"
- "3개 데이터 자동화"

**Park 신호:**
- "전공생", "코딩 배운 지 2년", "실무 경험 없음"
- "포트폴리오 만들기", "배포", "GitHub"
- "3개 프로젝트 + 부수입"

**Choi 신호:**
- "풀스택", "여러 언어", "DevOps", "고급"
- "판매 가능한", "SaaS", "비즈니스 모델"
- "3개 판매 가능 Skill", "월 $$$ 수익"

---

## 📊 점수 계산 로직

### 점수 시스템
```
각 항목당 0-100점 (또는 -50 ~ +50)
전체 4개 항목 합산
최고점 Persona가 결정됨
```

### 의사코드 예시

```python
def infer_persona(user_responses):
    """
    user_responses = {
        'job': '마케팅 프리랜서',
        'repeated_tasks': 'SNS 데이터 수집',
        'main_pain': '시간 + 정확도',
        'tech_goal': 'Python 기초, 데이터 자동화'
    }
    """

    scores = {
        'Kim': 0,
        'Lee': 0,
        'Park': 0,
        'Choi': 0
    }

    # 1. 직업 분석
    job_score = analyze_job(user_responses['job'])
    scores = add_scores(scores, job_score)

    # 2. 반복 업무 분석
    task_score = analyze_tasks(user_responses['repeated_tasks'])
    scores = add_scores(scores, task_score)

    # 3. 불편함 분석
    pain_score = analyze_pain(user_responses['main_pain'])
    scores = add_scores(scores, pain_score)

    # 4. 기술&목표 분석
    tech_score = analyze_tech_goal(user_responses['tech_goal'])
    scores = add_scores(scores, tech_score)

    # 최고점 결정
    persona = max(scores, key=scores.get)
    confidence = scores[persona] / sum(scores.values())

    return {
        'persona': persona,
        'scores': scores,
        'confidence': confidence  # 0-100%
    }
```

---

## 🎯 분석 예시

### 사례 1: Lee (마케팅/데이터)

```
사용자 입력:
- 직업: "마케팅 프리랜서"
- 반복: "SNS 댓글/좋아요 데이터를 손으로 정리"
- 불편: "시간이 너무 오래 걸림 + 정확도 낮음"
- 기술: "Python 기초 있어, 데이터 자동화 도구 만들기"

점수:
- Kim:   50 (프리랜서 O, 하지만 마케팅이라 -)
- Lee:  95 (마케팅 + 데이터 + 정확도 + Python ++)
- Park: 20 (취준생 아님)
- Choi: 15 (개발자 아님)

결과: "Lee" 타입 (신뢰도 90%)
```

### 사례 2: Kim (비전공/실무)

```
사용자 입력:
- 직업: "기획 프리랜서"
- 반복: "매일 미팅 음성파일 정리"
- 불편: "30분 매일 낭비, 반복이 싫어"
- 기술: "코딩 못 해, 그냥 자동화로 시간 절약"

점수:
- Kim:   95 (프리랜서 + 일일 반복 + 시간 + 초보 ++)
- Lee:  30 (데이터 아님)
- Park: 25 (취준생 아님)
- Choi: 10 (개발자 아님)

결과: "Kim" 타입 (신뢰도 85%)
```

### 사례 3: Park (포트폴리오/취준)

```
사용자 입력:
- 직업: "대학생, 취업 준비 중"
- 반복: "학교 프로젝트 + 자기 학습"
- 불편: "포트폴리오가 약해서 취업 못 함"
- 기술: "Python 1년, 배포는 못 해봤어"

점수:
- Kim:   20 (일이 많지 않음)
- Lee:  25 (데이터가 아님)
- Park: 95 (취준생 + 포트폴리오 + 경력 ++)
- Choi: 20 (고급 개발자 아님)

결과: "Park" 타입 (신뢰도 88%)
```

### 사례 4: Choi (개발자/제품화)

```
사용자 입력:
- 직업: "풀스택 개발자, 부수입 원함"
- 반복: "API 통합, 대용량 데이터 처리"
- 불편: "확장성 부족, 비즈니스 모델 불명확"
- 기술: "Python 고수, 좋은 도구를 팔고 싶어"

점수:
- Kim:   15 (기술이 너무 고급)
- Lee:  30 (마케팅이 아님)
- Park: 20 (취준생 아님)
- Choi: 95 (개발자 + 고도화 + 수익화 ++)

결과: "Choi" 타입 (신뢰도 92%)
```

---

## 🔄 신뢰도에 따른 처리

### 신뢰도 80% 이상
```
"당신은 Lee 타입 같습니다!"
→ 바로 확인 화면으로
```

### 신뢰도 50-80%
```
"당신은 Lee 타입 같은데, 다른 것도 있나요?"
→ 상위 2개 Persona 제시
```

### 신뢰도 50% 미만
```
"여러 특징이 섞여있네요. 직접 선택해주세요!"
→ 4가지 모두 제시
```

---

## 📝 구현 고려사항

### 1. 키워드 매칭 (간단)
```python
kim_keywords = ['미팅', '이메일', '매일', '반복', '시간', '간단']
lee_keywords = ['데이터', 'SNS', '분석', '정확도', 'API']
park_keywords = ['취준', '포트폴리오', '학생', '배포', '경력']
choi_keywords = ['개발자', 'API', '스케일', '수익', '고급']

def count_keywords(text, keywords):
    return sum(1 for kw in keywords if kw in text)
```

### 2. 가중치 조정 (고도화)
```python
weights = {
    'job_analysis': 0.3,        # 직업은 30% 중요
    'task_analysis': 0.25,      # 업무는 25%
    'pain_analysis': 0.25,      # 불편함은 25%
    'tech_analysis': 0.2        # 기술은 20%
}
```

### 3. 신뢰도 계산
```python
max_score = max(scores.values())
total_score = sum(scores.values())
confidence = (max_score - second_max_score) / total_score * 100
```

### 4. 부정 신호 (특별 처리)
```python
# 예: "나는 개발자가 아니에요"
if "아니" in response and "개발" in response:
    scores['Choi'] -= 50
```

---

## ✅ 검증 체크리스트

Persona 추론 결과 확인:

- [ ] 추론된 Persona가 사용자 답변과 일치
- [ ] 신뢰도가 50% 이상
- [ ] 신뢰도에 따른 다음 액션 명확
- [ ] 사용자가 쉽게 수정 가능 (1. Yes / 2. No / 3. Show all)

---

## 🚀 확장 아이디어

### 미래: 더 정교한 추론
- NLP 기반 감정 분석
- 기존 사용자 데이터 학습
- 멀티모달 입력 (음성 → 텍스트 → 분석)

### 동적 조정
- 처음 Persona는 추론으로
- 이후 실제 사용 패턴으로 자동 조정
- "당신은 처음에는 Kim이라 했는데, 요즘은 Lee처럼 행동하네요?"

---

이 로직으로 setup-workspace Step 3의 질의가 자동으로 Persona를 결정하고, Step 4에서 사용자가 확인하는 방식으로 진행됩니다.
