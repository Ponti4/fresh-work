# 통합 개발 로그 생성 시스템 설정 파일
# Claude Code CLI, VS Code Extensions, Aide 등 다중 도구 세션 추적

# 프로젝트 기본 정보
project:
  name: "gpters-20th-templates"
  description: "지피터스 20기 프리랜서 자동화 Skill 개발 프로젝트"
  root_dir: "C:\\test\\duwls-workspace\\gpters-20th-templates"  # 프로젝트 루트 디렉토리

# 개발 로그 출력 설정
devlog:
  output_file: "DEVLOG.md"
  append_mode: true  # true: 기존 파일이 있으면 추가 / false: 덮어쓰기
  max_entries_per_session: 50  # 세션당 최대 항목 수
  include_metadata: true  # 메타데이터(타임스탐프, 도구명) 포함 여부

# 세션 추적 대상 도구들
tools:
  # Claude Code CLI - 기본값
  claude_code_cli:
    enabled: true
    name: "Claude Code CLI"
    session_dir: "~/.claude/projects"
    # 프로젝트별 세션 저장 구조: {session_dir}/{project-key}/{session-files}
    # 파일 형식: *.jsonl (JSON Lines)
    patterns:
      - "*.jsonl"
    exclude_patterns:
      - "agent-*.jsonl"  # Agent 세션 파일 제외
      - "_*"  # 언더스코어로 시작하는 파일 제외
    filters:
      min_message_size: 50  # 50자 이상의 메시지만 포함
      exclude_ide_metadata: true  # IDE 메타데이터(<ide_* 태그) 필터링

  # VS Code Extensions
  vs_code_extension:
    enabled: true
    name: "VS Code Extension"
    session_dirs:
      - "~/.vscode"
      - "~/.vscode-insiders"
    patterns:
      - "**/*.log"
      - "**/*.json"
    extensions:
      - name: "GitHub Copilot"
        paths: [".vscode/copilot"]
      - name: "Codeium"
        paths: [".vscode/codeium"]
      - name: "Tabnine"
        paths: [".vscode/tabnine"]
    filters:
      min_message_size: 50
      exclude_metadata: true

  # AntiGravity (Gemini AI Assistant)
  antigravity:
    enabled: true
    name: "AntiGravity"
    brain_dir: "~/.gemini/antigravity/brain"
    # 세션 저장 구조: {brain_dir}/{session-id}/conversation_log.md
    # 파일 형식: *.md (마크다운) + *.json (메타데이터)
    patterns:
      - "conversation_log.md"
      - "conversation_log.md.metadata.json"
    filters:
      min_message_size: 50  # 50자 이상의 메시지만 포함
      exclude_metadata: false  # 메타데이터 필터링 불필요 (파일 형식이 다름)

  # Aide (Local AI Assistant) - 향후 확장
  aide:
    enabled: false  # 필요 시 true로 변경
    name: "Aide"
    session_dir: "~/.aide"
    patterns:
      - "*.chat"
      - "*.json"
    filters:
      min_message_size: 50
      exclude_metadata: true

  # 향후 확장을 위한 템플릿
  custom_tool:
    enabled: false
    name: "Custom Tool"
    session_dir: "~/custom-tool"
    patterns: ["*.log"]

# 세션 필터링 및 정렬 설정
session:
  # 날짜 형식
  date_format: "%Y-%m-%d"  # 2025-12-28
  datetime_format: "%Y-%m-%d %H:%M:%S"

  # 시간대 설정 (선택사항)
  timezone: "UTC"  # 또는 "Asia/Seoul"

  # 세션 그룹핑
  group_by: "date"  # "date" 또는 "tool" 또는 "both"

  # 정렬 순서
  sort_order: "asc"  # "asc" (오래된 것부터) 또는 "desc" (최신부터)

  # 범위 필터링
  date_range:
    enabled: false
    start_date: null  # null 또는 "2025-12-25"
    end_date: null    # null 또는 "2025-12-31"

# 파싱 규칙
parsing:
  # Claude Code CLI 파싱
  claude_code:
    # JSON Lines 형식의 message 필드 추출
    message_field: "message"
    timestamp_field: "timestamp"
    type_field: "type"
    # type 값: "user", "assistant", "system"
    # content 구조: { type, content: { type, text } } 또는 string

  # VS Code 파싱
  vs_code:
    # 로그 파일에서 타임스탐프 패턴
    timestamp_pattern: "\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}"
    # 사용자/어시스턴트 구분 패턴 (선택사항)
    user_pattern: "\\[USER\\]|User:|>>>>"
    assistant_pattern: "\\[ASSISTANT\\]|Claude:|<<<<"

# 출력 포맷 설정
output:
  # 섹션 제목 형식
  section_title_format: "## {date} (Day {day_number})"

  # 작업 제목 형식
  task_title_format: "### {task_number}. {title}"

  # 도구 표시
  show_tool_name: true
  tool_format: "[{tool_name}]"

  # 시간 표시
  show_timestamp: false
  timestamp_format: "{time} "

  # 코드블록 설정
  code_block:
    language: ""  # 선택사항
    max_lines: 20  # 긴 코드는 최대 20줄까지만 표시
    truncate_marker: "... (truncated)"

  # 추가 섹션
  include_sections:
    - commit_history: true
    - tech_stack: true
    - main_features: true
    - summary: true

# 로깅 설정
logging:
  enabled: true
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  log_file: "_systems/01-devlog/logs/devlog.log"
  console_output: true

# 백업 설정
backup:
  enabled: true
  backup_dir: "_systems/01-devlog/backups"
  max_backups: 5  # 최대 5개 백업 유지
  backup_on_update: true

# 고급 옵션
advanced:
  # 중복 감지
  duplicate_detection: true
  similarity_threshold: 0.95  # 95% 유사도 이상은 중복으로 간주

  # 자동 정리
  auto_cleanup: true
  remove_empty_sessions: true

  # AI 기반 요약 (선택사항)
  summarize_with_ai: false
  # summarization_model: "gpt-4"  # API 설정 필요

  # 성능 설정
  max_workers: 4  # 병렬 처리 스레드 수
  chunk_size: 1000  # 한 번에 처리할 메시지 수
